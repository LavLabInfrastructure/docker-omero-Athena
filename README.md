# docker-omero-Athena  
## see ORIGINAL_README for general info  
### Changes from default websocket OME:  
### Uses custom server dockerfile  
See [docker-omero-serverLLAB](https://github.com/LavLabInfrastructure/docker-omero-serverLLAB/)  
### Implements HistoQC screening  
See [HistoQCLLAB](https://github.com/LavLabInfrastructure/HistoQCLLAB)  
After being processed through the pipeline a score is calculated and products are imported to omero through OMERO.DropBox  
### ZFS Ready   
createOmeroZFS will create zfs datasets for your docker containers.   
I did a fair bit of tinkering, but I still recommend you play with the settings here   
### BYO SSL Certs  
Autogenerated certificates are off and self-generated certificates are disabled  
### Config file templates  
Has nearly all config settings commented out in .sample.env/.sample.conf files  
HIGHLY recommend you copy it, remove .sample and configure your instance through those  
### Redis cache  
I've never used this before and tbh I can't tell if it's working but ther's no errors, and I triple checked the install documentation so good enough I guess  

# Dev workflow
### Generate certs:
    sudo docker-compose -f docker-compose.icessl.yml -f docker-compose.yml run icessl  
### (opt) mess with configs
    pgzfs.dev.conf, hqc.dev.env, omeroserver.dev.end, omeroweb.dev.env  
### start server
    sudo docker-compose up

# Production workflow
### Provide certs:
    put in at ./certs and either rename them to server.* or change configs to match your cert filename
### Create config files
    hqc.sample.env -> hqc.env, etc  
### Run createOmeroZFS.sh
    provide a zpool name as the first arg
### Edit docker-compose 
    Change DATA2 to your zpool name and you should probably change root and stuff
### Start it up!
    Docker errors are usually pretty reasonable, follow along till it works!

